% !TeX encoding = ISO-8859-1
% ################################
% PAGE GEOMETRY
% ################################
%% Use package geometry instead of a4wide!
\usepackage{geometry}	

\geometry{top=25mm,bottom=25mm,left=21mm,right=21mm,headsep=6mm,footskip=11mm,bindingoffset=8mm}

%% Visualization of the page layout
%\usepackage{layouts}
% commands:
%\printinunitsof{cm}
%\currentpage
%\pagedesign

%% Font
% Latex mit deutschen Umlauten:
% http://www.cs.albany.edu/~herrmann/latex_umlaute/

\usepackage[ansinew]{inputenc}
\usepackage[T1]{fontenc}	% EC-Schriften verwenden (vs. DC) da 8-Bit
				% EC-Schriften als T1-kodierten CM-Schriften
				% European/Ext.-Computer-Modern-(EC)-Schriften
				% Umlaute, Anführungszeichen ...
				% => Umlauten koennen richtig getrennt werden
				% FAQ 5.3.2
\usepackage{ae,aecompl}		% virtuelle-CM-Fonts
				% da EC nicht als PostScript-(Type-1) verfuegbar
				% => keine echten Umlaute im PDF-Dokumen 
				%(Problem bei Suche)
				% By loading the ae package (\usepackage{ae}), 
				% you loose some characters as mentioned in 
				% README. 
				% The package aecompl by Denis Roegel restores
				% these characters which are taken from the ec 
				% fonts. If you use pdftex, you will get these 
				% characters as bitmaps, but this might be 
				% better than not having them at all.
\usepackage[sc]{mathpazo} % Palatino (not Palatino Linotype!) as font with serifs
\linespread{1.05}         % Palatino needs more space between lines
\usepackage[scaled=.90]{helvet} % Helvetica as font without serifs
\usepackage{courier} % Courier as type writer font
%% Euro symbol
\usepackage{textcomp} % Euro symbol that fits to Palatino (use \texteuro)

%% Create commands and macros with two optional parameters
\usepackage{twoopt}

% Customized chapter headings
\usepackage{titlesec}
\titleformat{\chapter}[display]
{\filleft\huge\bfseries\sffamily} % Size of headings and chapter number
{\vspace{-5ex}\fontsize{100pt}{80pt}\selectfont\thechapter}
{-2ex} %  horizontal separation between label and title body 
{\vspace{1ex}} % code preceding the title body
[\vspace{1ex}] % code following the title body

% chapter headings wihout titlesec to remove warnings (not yet completed)
%\renewcommand\raggedchapter{\raggedleft}
%\setkomafont{chapter}{\huge\bfseries\sffamily}
%\RedeclareSectionCommand[beforeskip=1ex,afterskip=1ex,innerskip=12pt]{chapter}
%\renewcommand\chapterformat{%
%	\fontsize{100pt}{80pt}\selectfont\thechapter
%}





%% Math
\usepackage{amsmath}%
\usepackage{amsfonts}%
\usepackage{amssymb}%
\usepackage{mathtools}%
\usepackage{amsthm}

%% Theorems
\newtheoremstyle{myTheoremStyle}% name
%{2\lineskip}      % Space above
%{2\lineskip}      % Space below
{11pt}      % Space above
{11pt}      % Space below
{\itshape}  % Body font
{}          % Indent amount (empty = no indent, \parindent = para indent)
{\bfseries} % Thm head font
{:}         % Punctuation after thm head
{.5em}      % Space after thm head: " " = normal interword space;{\newline = linebreak}
{}          % Thm head spec (can be left empty, meaning 'normal')
% define theorems in theorems.tex



%% Language settings
\usepackage[english,ngerman]{babel}
\usepackage[babel,autostyle]{csquotes}
\AtBeginDocument{
\iftoggle{lang_eng}{\selectlanguage{english}}{\selectlanguage{ngerman}}
}

%% Tables
\usepackage{tabularx}
\usepackage{booktabs}

%% for compactitem
\usepackage{paralist}     

%% Useful package for SI units
\usepackage[exponent-product = \cdot,
			output-complex-root = j, 
			separate-uncertainty = true,
			output-product = \cdot,
			arc-separator = \,,
			product-units = brackets-power]{siunitx}
			
\iftoggle{lang_eng}
{
	\sisetup{
		list-final-separator = { and },
		list-pair-separator = { and },
		range-phrase = { to }
	}
}
{
	\sisetup{
	locale=DE,
	list-final-separator = { und },
	list-pair-separator = { und },
	range-phrase = { bis }
	}
}




%% check whether compiler is set to latex or pdflatex
\usepackage{ifpdf} 
\usepackage{ifplatform}

%% Include without pagebreak
\usepackage{newclude} 
% command 
% use \include*{file}

%% Figures
\usepackage{graphicx} % Graphicx-package

%% Include other pdf pages
\usepackage{pdfpages}

%% Algorithm
\usepackage[chapter, ruled]{algorithm} % plain, boxed, ruled
%\floatname{algorithm}{Algorithmus} % will be overwritten by \captionsetup (see below)
\usepackage[noend]{algpseudocode} % Alternative Algorithmenumgebung
\newcommand*\Let[2]{\State #1 $\gets$ #2}
\iftoggle{lang_eng} {}
{ % German translations
	\algrenewcommand\algorithmicrequire{\textbf{Voraussetzung:}}
	\algrenewcommand\algorithmicensure{\textbf{Abschlussbedingung:}}
}

%% Captions
\usepackage[normal,small]{caption} % Customise the captions in floating environments
\usepackage{subcaption}  % To place figures side by side, if you wish to do that in latex... It is recommended to do that externally.

% Setup captions for algorithm
\DeclareCaptionLabelFormat{algo_format}{#1 #2.}
\captionsetup[algorithm]{name=\iftoggle{lang_eng}{Algorithm}{Algorithmus}, labelformat=algo_format,font=small,labelfont=small, labelsep=colon,justification=centering}

% Remove top rule from algorithm package
%\makeatletter
%\newcommand\fs@ruled@notop{\def\@fs@cfont{\bfseries}\let\@fs@capt\floatc@ruled
%  %\def\@fs@pre{\hrule height.8pt depth0pt \kern2pt}% <----removed
%  \def\@fs@pre{}%
%  \def\@fs@post{\kern2pt\hrule\relax}%
%  \def\@fs@mid{\kern2pt\hrule\kern2pt}%
%  \let\@fs@iftopcapt\iftrue}
%\renewcommand\fst@algorithm{\fs@ruled@notop}
%\makeatother

% Convert eps to pdf
\ifpdf
	\usepackage{epstopdf}
\fi

\usepackage{psfrag} % To correct the mess Matlab produces in figures!

\usepackage{pgfplots} % include TIKZ support
\usetikzlibrary{positioning,automata,through,calc,plotmarks,shapes,arrows, decorations.markings,shapes.misc,backgrounds} % include some useful tikz packages
% TIKZ: Draw vector images directly in matlab or use the matlab exporter plugin:
% Export Matlab-Plots using: matlab2tikz (http://www.mathworks.com/matlabcentral/fileexchange/22022-matlab2tikz)
% Need help?: christoph.roesmann@tu-dortmund.de
%\usepackage{tikz,pgfplots}
\pgfplotsset{compat=newest}
\pgfplotsset{plot coordinates/math parser=false}
\iftoggle{lang_eng}{}
{
	\pgfplotsset{/pgf/number format/use comma} % Kommata für Dezimaldarstellung
	\pgfplotsset{/pgf/number format/.cd,1000 sep={}} % Trennzeichen bei 1000
	%\pgfplotsset{/pgf/number format/.cd,1000 sep={\,}} % Trennzeichen bei 1000
}
\newlength\figureheight
\newlength\figurewidth
\makeatletter
\pgfplotsset{ % Korrektur der Legenden, die unter dem Plot angezeigt werden (legend pos = outer south /outer north)
    every axis x label/.append style={
        alias=current axis xlabel,
    },
    legend pos/outer south/.style={
        /pgfplots/legend style={
            at={%
                (%
                \@ifundefined{pgf@sh@ns@current axis xlabel}%
                {xticklabel cs:0.5}%
                {current axis xlabel.south}%
                )%
            },
            anchor=north,
            legend columns=3,
            font=\small,
            /tikz/every even column/.append style={column sep=10pt, font=\small} %Increase spacing in legend
        }
    },
    legend pos/outer north/.style={
        /pgfplots/legend style={
            at={(\figurewidth/2,\figureheight+0.2cm)},
            draw=none, % ignore box around legend
            anchor=south,
            legend columns=3,
            font=\small,
            /tikz/every even column/.append style={column sep=10pt, font=\small} %Increase spacing in legend
        }
    }
}
\makeatother

% select unique fontsize (small) at the beginning of each tikz picture
\tikzset{every picture/.style={font issue=\small},
         font issue/.style={execute at begin picture={#1\selectfont}}
        }
\tikzset{fontscale/.style = {font=\small}
        }
% add arrow pins to axis by default
\tikzset{every axis/.style={
axis lines = left % middle
}
}  

        
% Externalize tikz image
% Many tikz images or tikz images with lots of data can imply a full latex buffer and therefore stop the comilation.
% If you enable externalization, tikz images are precompiled into an eps/pdf image.
% They are recompiled automatically after updating the tikz image (make sure to use recent Latex Distributions (2014+)) 
% All you need to do is to add an argument (enable-write18 or shell-escape) to the latex executable 
% in order to allow system calls:
% On Windows systems:
% 	 latex.exe [other arguments] -enable-write18 %.tex
% 	 pdflatex.exe [other arguments] -enable-write18 %.tex
% On Unix systems (Mac/Linux):
% 	 latex.exe [other arguments] -shell-escape %.tex
% 	 pdflatex.exe [other arguments] -shell-escape %.tex

\ifnum\pdfshellescape=1
% System calls enabled
	%\usetikzlibrary{external} % not up to date at the moment
	\usepgfplotslibrary{external}
	

	%\ifpdf
   	%%%%%   DEPRECATED. Update pgfplots package (>Sept 2014). 
   	%%%%%				The new version automatically distinguishes between pdflatex and dvips.
	%%%%%				Uncomment only if you still have problems.
	%%%%%				This code will be removed in further versions.
	%\else  % only for latex dvi/ps
	%	\tikzset{external/system call={latex \tikzexternalcheckshellescape -halt-on-error
	%	-interaction=batchmode -jobname "\image" "\texsource" && % replace && with ; in TexLive u.a.
	%	dvips -o "\image".ps "\image".dvi  % && ps2eps "\image.ps"
	%	}}
	%\fi

	\tikzexternalize[prefix=Abbildungen/tikz-extern/, % folder to store precompiled tikz images (Make sure, folder already exists!!!)
					optimize command away=\includepdf ] % avoid conflicts with the pdfpages packages 

	% Some packages are not compatible with externalization. Create wrapped code to disable externalization:
	\makeatletter
	\AtBeginDocument{
		% for those using the todonodes package: this command disables the externalization mechanism from the inserted todonotes.
		\@ifpackageloaded{todonotes}{ 
			\renewcommand{\todo}[2][]{\tikzexternaldisable\@todo[#1]{#2}\tikzexternalenable} 
		}{}
		% missing-?gure package:
		\@ifpackageloaded{xmissingfigure}{ 
			\newcommand{\xmissingfigure}[2][]{\tikzexternaldisable\missingfigure[#1]{#2}\tikzexternalenable}
		}{}
	}
	\makeatother
\fi


% Fix some issue with tikz externalize on mac os in which 
% pdflatex was not called correctly
% workaround: specify pdflatex call manually:
\ifnum\pdfshellescape=1
	\ifmacosx
	\tikzset{external/system call={%
			PATH=/usr/texbin:$PATH pdflatex \tikzexternalcheckshellescape
			-halt-on-error -interaction=batchmode 
			-jobname "\image" "\texsource"}}
	\fi
\fi

% By default precompiled tikz images are named in order of appearance. 
% If you use this macro (\includetikz{}), the temporary file will be named similar to the original tikz file. 
%\newcommand{\includetikz}[1]{%
%	 \ifnum\pdfshellescape=1
%    	\tikzsetnextfilename{#1}%
%	 \fi
%    \input{Abbildungen/#1.tikz}%
%}
% This version adds two optional parameters to specify figurewidth and figureheight
\newcommandtwoopt{\includetikz}[3][0.9\linewidth][5cm]{ % optinal parameters [width][height]
	\ifnum\pdfshellescape=1
    	\tikzsetnextfilename{#3}%
    \fi
    \setlength\figurewidth{#1} 
    \setlength\figureheight{#2} 
    \input{Abbildungen/#3.tikz}%
}

% if you are using older latex distributions (<2014), the precompiled tikz images are not updated automatically, therefore run this command to update all images:
%\tikzset{external/force remake} % Recompile all tikz images

% Some helpful commands
\newcommand{\externalizeNext}{\tikzset{external/force remake=true}} % Force externalizing the next tikz picture (but tikzexternalize must be enabeld at all)
\newcommand{\externalizeOn}{\tikzset{external/export=true}} % Enable tikz externalizing for all figure splaced afterwards
\newcommand{\externalizeOff}{\tikzset{external/export=false}} % Disable tikz exernalizing for all figures placed afterwards



%% Colors for text
\usepackage{color}
\usepackage{colortbl}
% Define user colors in RGB
\definecolor{black}{rgb}{0.0,0.0,0.0}
\definecolor{darkgray}{rgb}{0.8,0.8,0.8}
\definecolor{lightgray}{rgb}{0.95,0.95,0.95}
% Example:
%\begin{tabular}{lll>{\columncolor{lightgray}}l}
%\rowcolor{darkgray}
%No. & Supported Feature   & Octet & Bit \\
%0   & Flow Control Mode   & 0     & 0   \\
%\rowcolor{lightgray}
%1   & Retransmission Mode & 0     & 1   \\
%2   & \cellcolor{darkgray}Bi-directional QoS  & 0     & 2   \\
%31  & Reserved for feature mask ext. & 3 & 7
%\end{tabular}

%% Rotate figures
\usepackage{rotating}
\usepackage{import}

%% Nomenclature
\usepackage[noprefix,intoc,\iftoggle{lang_eng}{english}{german}]{nomencl}
\setlength{\nomlabelwidth}{.25\hsize}
\setlength{\nomitemsep}{-\parsep}
% Split nomenclature for symbols and abbreviations
\renewcommand{\nomgroup}[1]{%
\ifstrequal{#1}{C}{\vspace{3mm}\item[\textbf{\iftoggle{lang_eng}{Roman symbols}{Lateinische Symbole}}]}{
\ifstrequal{#1}{B}{\vspace{3mm}\item[\textbf{\iftoggle{lang_eng}{Greek symbols}{Griechische Symbole}}]}}{
\ifstrequal{#1}{A}{\vspace{3mm}\item[\textbf{\iftoggle{lang_eng}{Abbreviations and acronyms}{Abkürzungen und Akronyme}}]}{}}} 



\makenomenclature %Generates a %tm.nlo file
% Postprocessor settings: run makeindex.exe  with argument list: %tm.nlo -s nomencl.ist -o %tm.nls (TeXnicCenter -> Ausgabeprofile)
% Use \printnomenclature to create a nomenclature in your document
% Use \nomenclature[A]{abrev.}{description} for abbreviations
% Use \nomenclature[1symbol]{symbol}{description} for greek symbols
% Use \nomenclature[3symbol]{\symbol}{description} for greek symbols. Note: Rewriting the symbol name without the backslash is important for correct alpha numeric ordering! This is particularly visible if you have hats, tilde, dots, bars or anything like that to modify your greek letter.
%
% TexStudio:
% 1. Step: configure Makeindex 
%  Compile flags: Makeindex: makeindex.exe %.nlo -s nomencl.ist -o %.nls 
% 2. Step: run Makeindex during compilation
%  TexStudio: Tab Create: Default compiler: add makeindex (click on screwdriver button)
%
% For additional information see:
% http://www.ctan.org/tex-archive/macros/latex/contrib/nomencl/


%% Bibliography using Biblatex
% Simple bibtex is outdated. Biblatex provides a whole lot of nice features.
\usepackage[babel=hyphen,style=authoryear-comp,firstinits=true,uniquename=init,isbn=false,doi=false,dashed=false,backend=bibtex,maxnames=3,minnames=1,maxbibnames=99]{biblatex}
% Detailed information: ftp://ftp.mpi-sb.mpg.de/pub/tex/mirror/ftp.dante.de/pub/tex/macros/latex/contrib/biblatex/doc/biblatex.pdf
%
% Options used here:
% - babel=hyphen -> hyphenation in multiple languages within bibliography. Just add a new field to your bibtex entry to indicate which language to use. Example: hypenation={ngerman} for german hyphenation in english documents, hypenation={english} for english hyphenation in german documents.
% - style=numeric together with defernumbers = true: Citations using reference numbers (e.g. [12] ); defernumbers enables unique reference numbers even with multiple bibliographies
% - backend=bibtex: Avoids the installation of biber

% Increase spacing between two bib items
\setlength{\bibitemsep}{0.5\baselineskip}

\addbibresource{thesis.bib} % Bibtex file 
% Settings for bibliography with external references
%\defbibheading{ref}[References]{
%\pagestyle{myheadings}%
%\markboth{#1}{#1}%
%\section*{#1}%
%}
%\defbibnote{ref}{Parts of the material presented in this work has been originally published in conferences and journals. These publications as well as the resources by other researchers are summarized in the following list:}

% Settings for the bibliography with supervised theses
%\DeclareBibliographyCategory{thes}	 
%\defbibheading{thes}[Supervised theses]{
%\newpage
%\pagestyle{myheadings}%
%\markboth{#1}{#1}%
%\section*{#1}%
%}
%\defbibnote{thes}{A number of ideas grown during this work emerged from discussions in the context of supervised theses. Source code and measurement data contributed to the material presented in this work. The contributing theses are:}

% Settings for the bibliography with your published media
%\DeclareBibliographyCategory{media}
%\defbibheading{media}[Published Software and Media]{
%\newpage
%\pagestyle{myheadings}%
%\markboth{#1}{#1}%
%\section*{#1}%
%}
%\defbibnote{media}{During preparation of this work the following media and sources have been published online under open licenses:}

\ifnum\pdfshellescape=1
	\tikzifexternalizing{% fix compatibility problems with defernumbers of biblatex
	        \ExecuteBibliographyOptions{defernumbers=false}
	}{}
\fi

% Make bold labels in bibliography!
% From:  http://tex.stackexchange.com/questions/91570/bibliography-with-biblatex-how-to-achieve-bold-labels-using-the-authoryear-styl
\usepackage{xpatch}
%\xpretobibmacro{author}{\mkbibbold\bgroup}{}{}
%\xapptobibmacro{author}{\egroup}{}{}
%\xpretobibmacro{bbx:editor}{\mkbibbold\bgroup}{}{}
%\xapptobibmacro{bbx:editor}{\egroup}{}{}
%\renewcommand*{\labelnamepunct}{\mkbibbold{\addcolon\space}}

\usepackage{bibspacing}
% Spacing between references. This package requires the file bibspacing.sty
\setlength{\bibspacing}{\baselineskip}

% Conditionally build comments and contents
\usepackage{comment} 
%In preamble:
%% Variant I: Summary only: 
%%\includecomment{summary} %Build latex code within summary environment
%%\excludecomment{content} %Do not build latex code within the content envrionment
%% Variante II: Nur Inhalt:
%%\excludecomment{summary} %Do not build latex code within the summary environment
%%\includecomment{content} %Build latex code within content envrionment
%% Variante III: Summary + Inhalt:
%\includecomment{summary} %Build latex code within summary environment
%\includecomment{content} %Build latex code within content envrionment
%
% Usage in the body. Example:
%\begin{summary}
%\rule{\textwidth}{1pt} % <- visual separation between summary and contents in compiled document
%SUMMARY GOES HERE\\
%\rule{\textwidth}{1pt} % <- visual separation between summary and contents in compiled document
%\end{summary}
%\begin{content}
%This is the content\\
%\end{content}

%% Hyperlinks, has to be the last package!
%\usepackage[colorlinks=true,urlcolor=blue,citecolor=blue,linkcolor=black]{hyperref} % schön fürs PDF
\usepackage[colorlinks=false]{hyperref} % schön für Druck
\ifpdf
\else
\usepackage[anythingbreaks]{breakurl} % only for ps/dvi
\fi
\color{black} % Make sure the whole text black!


